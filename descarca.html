<!DOCTYPE html>
<html class="no-js" prefix="og: https://ogp.me/ns#" lang="ro">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Gata să înceapă aventura? Pentru a intra în tărâmurile cunoașterii și a descărca jocul complet, ai nevoie de un cont. De ce? Pentru că vei salva progresul, vei participa la leaderboarduri și vei primi provocări speciale.">
  <meta name="robots" content="index,follow">
  <meta property="og:title" content="Descarcă jocul :: Aventura Piticilor Medievali: cărțile pierdute">
  <meta property="og:description" content="Gata să înceapă aventura? Pentru a intra în tărâmurile cunoașterii și a descărca jocul complet, ai nevoie de un cont. De ce? Pentru că vei salva progresul, vei participa la leaderboarduri și vei primi provocări speciale.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://siteul-tau.ro/descarca">
  <meta property="og:image" content="images/sword.png">
  <link rel="canonical" href="https://siteul-tau.ro/descarca">

  <link rel="icon" href="images/favicon.svg" type="image/svg+xml" sizes="any">
  <link rel="icon" href="images/favicon16.svg" sizes="16x16">
  <link rel="icon" href="images/favicon.ico">
  <link rel="apple-touch-icon" href="images/favicon.ico">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link rel="stylesheet" href="css/style.css">
  <title>Descarcă Jocul - Aventura Piticilor Medievali</title>
  <style>
    @font-face {
      font-family: 'MedievalSharp';
      src: url('fonts/MedievalSharp-Book.ttf') format('truetype');
    }

    body {
      margin: 0;
      font-family: 'MedievalSharp', cursive;
      background-color: #fffbea;
      color: #3b2f2f;
    }

    header {
      background-color: #3b2f2f;
      color: white;
      text-align: center;
      padding: 20px;
    }

    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
    }

    nav a {
      text-decoration: none;
      color: #ffe600;
      font-size: 18px;
    }

    nav a:hover {
      text-decoration: underline;
    }

    main {
      max-width: 900px;
      margin: auto;
      padding: 40px 20px;
    }

    .download-box {
      background-color: #fef6d3;
      padding: 30px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 30px;
    }

    .download-content {
      flex: 1;
    }

    .download-box h1 {
      margin-top: 0;
    }

    .download-box p {
      font-size: 1.1rem;
      margin-bottom: 20px;
    }

    .download-box a {
      display: inline-block;
      padding: 12px 25px;
      background-color: #3b2f2f;
      color: white;
      border-radius: 8px;
      text-decoration: none;
      font-size: 1rem;
    }

    .download-box a:hover {
      background-color: #5b4444;
    }

    .sword-image {
      width: 180px;
      flex-shrink: 0;
    }

    .chat-box {
      background-color: #fff4c2;
      margin-top: 40px;
      padding: 20px;
      border-radius: 12px;
    }

    .chat-box h2 {
      margin-top: 0;
    }

    #messages {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      height: 250px;
      overflow-y: auto;
      background-color: #fff;
    }

    .message {
      background: url('images/book_tray.png') repeat-y center;
      background-size: 100% auto;
      padding: 15px;
      margin-bottom: 12px;
      border-radius: 8px;
      font-size: 1.05rem;
    }

    #new-message {
      display: flex;
      margin-top: 10px;
    }

    #new-message textarea {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: vertical;
    }

    #new-message button {
      margin-left: 10px;
      padding: 10px 15px;
      background-color: #3b2f2f;
      color: white;
      border: none;
      border-radius: 8px;
    }

    footer {
      text-align: center;
      padding: 30px 10px;
      background: #3b2f2f;
      color: #ffe600;
      font-size: 1.1rem;
      letter-spacing: 0.5px;
      border-top: 2px solid #ffe600;
      margin-top: 40px;
      border-radius: 18px 18px 0 0;
      box-shadow: 0 -2px 12px 0 rgba(200,180,100,0.07);
    }
  </style>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getDatabase,
      ref,
      push,
      onChildAdded,
      onValue,
      get,
      child
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyADT_zCEls_mMMEgvY44bWI3zzrvWdxIxY",
      authDomain: "chat-feedback-20336.firebaseapp.com",
      databaseURL: "https://chat-feedback-20336-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "chat-feedback-20336",
      storageBucket: "chat-feedback-20336.firebasestorage.app",
      messagingSenderId: "920648385861",
      appId: "1:920648385861:web:c297bd0df63b93b6b66a2c",
      measurementId: "G-GN9DRMND12"
    };

    // ✅ Init Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const auth = getAuth();

    const messagesDiv = document.getElementById('messages');
    const form = document.getElementById('new-message');
    const input = document.getElementById('message-input');

    // ✅ Listen to auth
    const allMessagesRef = ref(db, 'messages');

    onAuthStateChanged(auth, user => {
      if (user) {
        const info = document.createElement('p');
        info.innerHTML = `Conectat ca: <strong>${user.displayName || user.email}</strong>`;
        document.querySelector(".chat-box").prepend(info);
        form.dataset.uid = user.uid;
        form.dataset.user = user.displayName || user.email;
        input.disabled = false;

        // ✅ Load all messages from all users
      
        onValue(allMessagesRef, snapshot => {
          messagesDiv.innerHTML = ''; // Clear on refresh
          snapshot.forEach(userSnap => {
            userSnap.forEach(msgSnap => {
              const entry = msgSnap.val();
              const time = new Date(entry.timestamp).toLocaleString('ro-RO', {
                dateStyle: 'medium',
                timeStyle: 'short'
              });
              const message = document.createElement('div');
              message.className = "message";
              message.innerHTML = `<strong>${entry.user}</strong> <em>(${time})</em><br>${entry.text}`;
              messagesDiv.appendChild(message);
            });
          });
          messagesDiv.scrollTop = messagesDiv.scrollHeight;
        });

      } else {
        input.disabled = true;
        input.placeholder = "Trebuie să fii conectat pentru a trimite mesaje.";
      }
    });

    // ✅ Handle message send
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const uid = form.dataset.uid;
      const user = form.dataset.user;
      const text = input.value.trim();

      if (text && uid && user) {
        const userRef = ref(db, `messages/${uid}`);
        push(userRef, {
          user,
          text,
          timestamp: Date.now()
        });
        input.value = '';
      }
    });
  </script>
</head>
<body>
  <header>
    <img src="images/book.png" alt="Logo joc" style="width: 120px; display: block; margin: 0 auto 10px;">
    <nav>
      <ul>
        <li><a href="index.html">Pagina de start</a></li>
        <li><a href="despre.html">Despre joc</a></li>
        <li><a href="povestea.html">Povestea</a></li>
        <li><a href="nivele.html">Nivele</a></li>
        <li><a href="descarca.html">Descarcă jocul</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div class="download-box">
      <img src="images/sword.png" alt="sword" class="sword-image">
      <div class="download-content">
        <h1>Descarcă jocul</h1>
        <p>Ești gata să pornești în aventura piticilor?</p>
        <p>Intră în tărâmul cunoașterii și salvează lumea medievală! Pentru a descărca jocul complet și a-ți salva progresul, ai nevoie de un cont.</p>
        <p>Alătură-te comunității noastre, urcă în clasament și acceptă provocări speciale. Fiecare erou contează!</p>
        <p><strong>Nu e doar un joc. E o călătorie magică și o comunitate a celor care iubesc aventura și învățarea.</strong></p>
        <a href="login.html">Creează un cont</a>
      </div>
    </div>

    <div class="chat-box">
      <h2>Feedback Live</h2>
      <div id="messages"></div>
      <form id="new-message">
        <textarea id="message-input" placeholder="Scrie un mesaj..."></textarea>
        <button type="submit">Trimite</button>
      </form>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Aventura Piticilor Medievali. Toate drepturile rezervate.</p>
  </footer>
</body>
</html>
